"use strict";angular.module("newFolderApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-loading-bar"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/buildings",{templateUrl:"views/buildings.html",controller:"BuildingsCtrl",controllerAs:"buildings"}).when("/buildings/:id",{templateUrl:"views/building.html",controller:"BuildingCtrl",controllerAs:"building"}).otherwise({redirectTo:"/"})}]).factory("ApiService",function(){return{baseurl:"/api/"}}).directive("lastRepeaterElement",function(){return function(a){a.$last&&a.$emit("LastRepeaterElement")}}).controller("NavigationCtrl",["$scope","$location",function(a,b){a.isCurrentPath=function(a){return b.path()==a}}]),angular.module("newFolderApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("newFolderApp").controller("BuildingsCtrl",["$scope","$http","ApiService",function(a,b,c){a.data=[],b({method:"GET",url:c.baseurl+"buildings"}).then(function(b){a.data=b.data},function(a){toastr.error("Σφάλμα: "+a.statusText)}),a.$on("LastRepeaterElement",function(){$('[data-toggle="tooltip"]').tooltip()})}]),angular.module("newFolderApp").controller("BuildingCtrl",["$scope","$http","$routeParams","ApiService",function(a,b,c,d){function e(){if(0==f)var c={method:"POST",url:d.baseurl+"buildings",data:JSON.stringify(a.data),contentType:"application/json"};else var c={method:"PUT",url:d.baseurl+"buildings/"+f,data:JSON.stringify(a.data),contentType:"application/json"};b(c).then(function(b){a.data=b.data,f=b.data.Id,toastr.success("Έγινε αποθήκευση.")},function(a){toastr.error("ΔΕΝ έγινε αποθήκευση. Σφάλμα: "+a.statusText)})}var f=c.id,g=new google.maps.LatLng(37.9667,23.7167),h={zoom:15,center:g,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map"),h),j=new google.maps.Geocoder,k=new google.maps.Marker({map:null,position:g,title:""});0!=f?b({method:"GET",url:d.baseurl+"buildings/"+f}).then(function(b){a.data=b.data;var c=new google.maps.LatLng(a.data.address.location.Lat,a.data.address.location.Lng),d=a.data.address.street+" "+a.data.address.streetnumber+", "+a.data.address.postalcode+" "+a.data.address.area;i.setCenter(c),k.setPosition(c),k.setTitle(d),k.setMap(i)},function(a){toastr.error("Σφάλμα: "+a.statusText)}):a.data={appartments:[],address:{location:{Lat:0,Lng:0}}},a.change=function(b,c){if(b){var d=a.data.address.street+" "+a.data.address.streetnumber+", "+a.data.address.postalcode+" "+a.data.address.area;j.geocode({address:d},function(b,f){if(f===google.maps.GeocoderStatus.OK){a.data.address.location.Lat=b[0].geometry.location.lat(),a.data.address.location.Lng=b[0].geometry.location.lng();var h=new google.maps.LatLng(a.data.address.location.Lat,a.data.address.location.Lng);i.setCenter(h),k.setPosition(h),k.setTitle(d),k.setMap(i)}else i.setCenter(g),k.setMap(null),k.setTitle(""),toastr.error("Geocode was not successful for the following reason: "+f);c&&e()})}}}]),angular.module("newFolderApp").run(["$templateCache",function(a){a.put("views/building.html",'<div class="row-fluid"> <div class="col-xs-6 col-md-6"> <form class="form-horizontal" name="buildForm"> <fieldset> <div class="panel panel-default"> <div class="panel-heading">Διεύθυνση</div> <div class="panel-body"> <div class="form-group"> <label class="col-md-4 control-label" for="street">οδός</label> <div class="col-md-4"> <input id="street" name="street" type="text" placeholder="οδός" class="form-control input-md" ng-model="data.address.street" required></div> <div class="col-md-4 text-right"> <button id="mapbutton" name="mapbutton" class="btn btn-primary" ng-click="change(buildForm.$valid,false)">Χάρτης</button> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="streetnumber">αριθμός</label> <div class="col-md-2"> <input id="streetnumber" name="streetnumber" type="text" placeholder="αριθμός" class="form-control input-md" ng-model="data.address.streetnumber" required></div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="area">περιοχή</label> <div class="col-md-4"> <input id="area" name="area" type="text" placeholder="περιοχή" class="form-control input-md" ng-model="data.address.area" required></div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="postalcode">Τ.Κ.</label> <div class="col-md-2"> <input id="postalcode" name="postalcode" type="text" placeholder="Τ.Κ." class="form-control input-md" ng-model="data.address.postalcode" required></div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading">Πληροφορίες</div> <div class="panel-body"> <div class="form-group"> <div class="checkbox col-md-2 col-md-offset-2"> <input class="styled" type="checkbox" ng-model="data.managment"> <label>Διαχείρηση</label> </div> <div class="checkbox col-md-2"> <input class="styled" type="checkbox" ng-model="data.active"> <label>Ενεργή</label> </div> <label class="col-md-4 control-label">Διαμερίσματα</label> <div class="col-md-2"> <button id="mapbutton" name="mapbutton" class="btn btn-default" data-toggle="modal" data-target="#myModal">{{data.appartments.length}}</button> </div> </div> </div> </div> <div class="col-md-4 col-md-offset-8 text-right"> <button id="savebutton" name="savebutton" class="btn btn-success" ng-click="change(buildForm.$valid,true)">Αποθήκευση</button> </div> </fieldset> </form> </div> <div class="col-xs-6 col-md-6" id="map" style="height: 520px"></div> </div> <!-- Modal --> <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <h4 class="modal-title" id="myModalLabel">Διαμερίσματα</h4> </div> <div class="modal-body"> <table class="table table-hover"> <thead> <tr> <th>Α/Α</th> <th>Διαμέρισμα</th> <th>Ένοικος</th> <th>Ιδιοκτήτης</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="item in data.appartments | orderBy: [\'position\'] as filtered_result track by item.position" last-repeater-element> <td>{{item.position}}</td> <td>{{item.title}}</td> <td></td> <td></td> <td> <a ng-href="#/buildings/{{item.id}}" data-toggle="tooltip" data-placement="top" title="Καρτέλα Διαμερίσματος"> <span class="glyphicon glyphicon-edit"></span> </a> </td> </tr> </tbody> </table> </div> </div> </div> </div>'),a.put("views/buildings.html",'<table class="table table-hover"> <thead> <tr> <th>Οδός</th> <th>Αριθμός</th> <th>Περιοχή</th> <th>T.K.</th> <th>Διαχείρηση</th> <th>Ενεργή</th> <th> <a ng-href="#/buildings/0" data-toggle="tooltip" data-placement="top" title="Προσθήκη νέου κτιρίου"> <span class="glyphicon glyphicon-plus-sign"></span> </a> </th> </tr> <tr> <td> <input type="text" ng-model="search.address.street"></td> <td> <input type="text" ng-model="search.address.streetnumber"></td> <td> <input type="text" ng-model="search.address.area"></td> <td> <input type="text" ng-model="search.address.postalcode"></td> <td> <div class="checkbox"> <input class="styled" type="checkbox" ng-model="search.managment"> <label></label> </div> </td> <td> <div class="checkbox"> <input class="styled" type="checkbox" ng-model="search.active"> <label></label> </div> </td> <td>{{(data | filter: search).length}} από {{data.length}}</td> </tr> </thead> <tbody> <tr ng-repeat="item in data | filter: search | orderBy: [\'address.street\',\'address.streetnumber\',\'address.area\'] as filtered_result track by item.id" last-repeater-element> <td>{{item.address.street}}</td> <td>{{item.address.streetnumber}}</td> <td>{{item.address.area}}</td> <td>{{item.address.postalcode}}</td> <td> <div class="checkbox"> <input class="styled" type="checkbox" ng-model="item.managment" disabled> <label></label> </div> </td> <td> <div class="checkbox"> <input class="styled" type="checkbox" ng-model="item.active" disabled> <label></label> </div> </td> <td> <a ng-href="#/buildings/{{item.id}}" data-toggle="tooltip" data-placement="top" title="Καρτέλα κτιρίου"> <span class="glyphicon glyphicon-edit"></span> </a> </td> </tr> </tbody> </table>'),a.put("views/main.html",'<div class="jumbotron"> <h1>ΕΣΤΙΑ City Services</h1> <p class="lead"> <img src="images/logo.3bfc6f98.png" alt="estia"> </p> </div>')}]);